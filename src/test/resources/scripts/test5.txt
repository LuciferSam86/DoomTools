function udmfjunk(map)
{
	data = {
		thing: [],
		vertex: [],
		linedef: [],
		sidedef: [],
		sector: []
	};
	
	each (k, v : map->map::elements())
	{
		if (mapget(data, k.type) != null)
			mapget(data, k.type)->listadd(v);
	}
	
	println(data.thing->length());
	println(data.vertex->length());
	println(data.linedef->length());
	println(data.sidedef->length());
	println(data.sector->length());
	println("");
}


check entry main(args)
{
	wad = wadfile(args[0]);
	map = map::view(wad, wad->wadentry(0).name);
	udmfjunk(map);
	
	buf = waddata(wad, "TEXTMAP");
	udmfjunk(buf);
	
	in = waddatastream(wad, "TEXTMAP");
	udmfjunk(in);
	close(in);
	
	reader = csropen(waddatastream(wad, "TEXTMAP"));
	udmfjunk(reader);
	close(reader);
	
	close(wad);
}